!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("fecha")):"function"==typeof define&&define.amd?define(["exports","fecha"],e):e(t.customCardHelpers={},t.fecha)}(this,function(t,e){function n(t){return t.substr(0,t.indexOf("."))}e=e&&e.hasOwnProperty("default")?e.default:e,function(){try{(new Date).toLocaleDateString("i")}catch(t){return"RangeError"===t.name}}(),function(){try{(new Date).toLocaleString("i")}catch(t){return"RangeError"===t.name}}(),function(){try{(new Date).toLocaleTimeString("i")}catch(t){return"RangeError"===t.name}}();var o=["closed","locked","off"],i=new Set(["fan","input_boolean","light","switch","group","automation"]),r=function(t,e,n,o){o=o||{},n=null==n?{}:n;var i=new Event(e,{bubbles:void 0===o.bubbles||o.bubbles,cancelable:Boolean(o.cancelable),composed:void 0===o.composed||o.composed});return i.detail=n,t.dispatchEvent(i),i},a=function(t,e,n){void 0===n&&(n=!1),n?history.replaceState(null,"",e):history.pushState(null,"",e),r(window,"location-changed",{replace:n})},c=function(t,e,o){void 0===o&&(o=!0);var i,r=n(e),a="group"===r?"homeassistant":r;switch(r){case"lock":i=o?"unlock":"lock";break;case"cover":i=o?"open_cover":"close_cover";break;default:i=o?"turn_on":"turn_off"}return t.callService(a,i,{entity_id:e})},s=function(t,e){var n=o.includes(t.states[e].state);return c(t,e,n)},l=function(t,e){r(t,"haptic",e)};const u=new WeakMap;String(Math.random()).slice(2);try{const t={get capture(){return!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.0.0");var p="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,d=function(t){function e(){t.call(this),this.holdTime=500,this.ripple=document.createElement("paper-ripple"),this.timer=void 0,this.held=!1,this.cooldownStart=!1,this.cooldownEnd=!1}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.connectedCallback=function(){var t=this;Object.assign(this.style,{borderRadius:"50%",position:"absolute",width:p?"100px":"50px",height:p?"100px":"50px",transform:"translate(-50%, -50%)",pointerEvents:"none"}),this.appendChild(this.ripple),this.ripple.style.color="#03a9f4",this.ripple.style.color="var(--primary-color)",["touchcancel","mouseout","mouseup","touchmove","mousewheel","wheel","scroll"].forEach(function(e){document.addEventListener(e,function(){clearTimeout(t.timer),t.stopAnimation(),t.timer=void 0},{passive:!0})})},e.prototype.bind=function(t){var e=this;if(!t.longPress){t.longPress=!0,t.addEventListener("contextmenu",function(t){var e=t||window.event;return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1});var n=function(t){var n,o;e.cooldownStart||(e.held=!1,t.touches?(n=t.touches[0].pageX,o=t.touches[0].pageY):(n=t.pageX,o=t.pageY),e.timer=window.setTimeout(function(){e.startAnimation(n,o),e.held=!0},e.holdTime),e.cooldownStart=!0,window.setTimeout(function(){return e.cooldownStart=!1},100))},o=function(n){e.cooldownEnd||["touchend","touchcancel"].includes(n.type)&&void 0===e.timer||(clearTimeout(e.timer),e.stopAnimation(),e.timer=void 0,t.dispatchEvent(e.held?new Event("ha-hold"):new Event("ha-click")),e.cooldownEnd=!0,window.setTimeout(function(){return e.cooldownEnd=!1},100))};t.addEventListener("touchstart",n,{passive:!0}),t.addEventListener("touchend",o),t.addEventListener("touchcancel",o),t.addEventListener("mousedown",n,{passive:!0}),t.addEventListener("click",o)}},e.prototype.startAnimation=function(t,e){Object.assign(this.style,{left:t+"px",top:e+"px",display:null}),this.ripple.holdDown=!0,this.ripple.simulatedRipple()},e.prototype.stopAnimation=function(){this.ripple.holdDown=!1,this.style.display="none"},e}(HTMLElement);customElements.get("long-press")||customElements.define("long-press",d);var h=function(t){var e=function(){var t=document.body;if(t.querySelector("long-press"))return t.querySelector("long-press");var e=document.createElement("long-press");return t.appendChild(e),e}();e&&e.bind(t)},f=(t=>(...t)=>{const e=function(){return function(t){h(t.committer.element)}}(...t);return u.set(e,!0),e})();t.DEFAULT_DOMAIN_ICON="hass:bookmark",t.DEFAULT_PANEL="lovelace",t.DOMAINS_WITH_CARD=["climate","cover","configurator","input_select","input_number","input_text","lock","media_player","scene","script","timer","vacuum","water_heater","weblink"],t.DOMAINS_WITH_MORE_INFO=["alarm_control_panel","automation","camera","climate","configurator","cover","fan","group","history_graph","input_datetime","light","lock","media_player","script","sun","updater","vacuum","water_heater","weather"],t.DOMAINS_HIDE_MORE_INFO=["input_number","input_select","input_text","scene","weblink"],t.DOMAINS_MORE_INFO_NO_HISTORY=["camera","configurator","history_graph","scene"],t.STATES_OFF=o,t.DOMAINS_TOGGLE=i,t.UNIT_C="°C",t.UNIT_F="°F",t.DEFAULT_VIEW_ENTITY_ID="group.default_view",t.fireEvent=r,t.handleClick=function(t,e,n,o){var i;switch(o&&n.hold_action?i=n.hold_action:!o&&n.tap_action&&(i=n.tap_action),i||(i={action:"more-info"}),i.action){case"more-info":n.entity&&(r(t,"hass-more-info",{entityId:n.entity}),i.haptic&&l(t,i.haptic));break;case"navigate":i.navigation_path&&(a(0,i.navigation_path),i.haptic&&l(t,i.haptic));break;case"url":i.url&&window.open(i.url),i.haptic&&l(t,i.haptic);break;case"toggle":n.entity&&(s(e,n.entity),i.haptic&&l(t,i.haptic));break;case"call-service":if(!i.service)return;var c=i.service.split(".",2);e.callService(c[0],c[1],i.service_data),i.haptic&&l(t,i.haptic)}},t.forwardHaptic=l,t.hasConfigOrEntityChanged=function(t,e){if(e.has("_config"))return!0;var n=e.get("hass");return!n||n.states[t._config.entity]!==t.hass.states[t._config.entity]},t.longPressBind=h,t.longPress=f,t.navigate=a,t.toggleEntity=s,t.turnOnOffEntities=function(t,e,i){void 0===i&&(i=!0);var r={};e.forEach(function(e){if(o.includes(t.states[e].state)===i){var a=n(e),c=["cover","lock"].includes(a)?a:"homeassistant";c in r||(r[c]=[]),r[c].push(e)}}),Object.keys(r).forEach(function(e){var n;switch(e){case"lock":n=i?"unlock":"lock";break;case"cover":n=i?"open_cover":"close_cover";break;default:n=i?"turn_on":"turn_off"}t.callService(e,n,{entity_id:r[e]})})},t.turnOnOffEntity=c});
//# sourceMappingURL=index.umd.js.map
