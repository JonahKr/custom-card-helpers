!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("fecha")):"function"==typeof define&&define.amd?define(["exports","fecha"],t):t(e.customCardHelpers={},e.fecha)}(this,function(e,t){function n(e){var t=e.split(":").map(Number);return 3600*t[0]+60*t[1]+t[2]}t=t&&t.hasOwnProperty("default")?t.default:t;var a=function(){try{(new Date).toLocaleDateString("i")}catch(e){return"RangeError"===e.name}return!1}()?function(e,t){return e.toLocaleDateString(t,{year:"numeric",month:"long",day:"numeric"})}:function(e){return t.format(e,"mediumDate")},r=function(){try{(new Date).toLocaleString("i")}catch(e){return"RangeError"===e.name}return!1}()?function(e,t){return e.toLocaleString(t,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"})}:function(e){return t.format(e,"haDateTime")},i=function(){try{(new Date).toLocaleTimeString("i")}catch(e){return"RangeError"===e.name}return!1}()?function(e,t){return e.toLocaleTimeString(t,{hour:"numeric",minute:"2-digit"})}:function(e){return t.format(e,"shortTime")},o=[60,60,24,7],s=["second","minute","hour","day"],c=function(e){return e<10?"0"+e:e};function u(e){return e.substr(0,e.indexOf("."))}function l(e){var t=e.language||"en";return e.translationMetadata.translations[t]&&e.translationMetadata.translations[t].isRTL||!1}function h(e){return u(e.entity_id)}var d=["closed","locked","off"],m=new Set(["fan","input_boolean","light","switch","group","automation"]),p=function(e,t,n,a){a=a||{},n=null==n?{}:n;var r=new Event(t,{bubbles:void 0===a.bubbles||a.bubbles,cancelable:Boolean(a.cancelable),composed:void 0===a.composed||a.composed});return r.detail=n,e.dispatchEvent(r),r},f={alert:"hass:alert",automation:"hass:playlist-play",calendar:"hass:calendar",camera:"hass:video",climate:"hass:thermostat",configurator:"hass:settings",conversation:"hass:text-to-speech",device_tracker:"hass:account",fan:"hass:fan",group:"hass:google-circles-communities",history_graph:"hass:chart-line",homeassistant:"hass:home-assistant",homekit:"hass:home-automation",image_processing:"hass:image-filter-frames",input_boolean:"hass:drawing",input_datetime:"hass:calendar-clock",input_number:"hass:ray-vertex",input_select:"hass:format-list-bulleted",input_text:"hass:textbox",light:"hass:lightbulb",mailbox:"hass:mailbox",notify:"hass:comment-alert",person:"hass:account",plant:"hass:flower",proximity:"hass:apple-safari",remote:"hass:remote",scene:"hass:google-pages",script:"hass:file-document",sensor:"hass:eye",simple_alarm:"hass:bell",sun:"hass:white-balance-sunny",switch:"hass:flash",timer:"hass:timer",updater:"hass:cloud-upload",vacuum:"hass:robot-vacuum",water_heater:"hass:thermometer",weblink:"hass:open-in-new"},v=function(e,t){p(e,"haptic",t)},g=function(e,t,n){void 0===n&&(n=!1),n?history.replaceState(null,"",t):history.pushState(null,"",t),p(window,"location-changed",{replace:n})},b=function(e,t,n){void 0===n&&(n=!0);var a,r=u(t),i="group"===r?"homeassistant":r;switch(r){case"lock":a=n?"unlock":"lock";break;case"cover":a=n?"open_cover":"close_cover";break;default:a=n?"turn_on":"turn_off"}return e.callService(i,a,{entity_id:t})},_=function(e,t){var n=d.includes(e.states[t].state);return b(e,t,n)};const y=new WeakMap;String(Math.random()).slice(2);try{const e={get capture(){return!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.0.0");var w="ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,E=function(e){function t(){e.call(this),this.holdTime=500,this.ripple=document.createElement("paper-ripple"),this.timer=void 0,this.held=!1,this.cooldownStart=!1,this.cooldownEnd=!1,this.nbClicks=0}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.connectedCallback=function(){var e=this;Object.assign(this.style,{borderRadius:"50%",position:"absolute",width:w?"100px":"50px",height:w?"100px":"50px",transform:"translate(-50%, -50%)",pointerEvents:"none"}),this.appendChild(this.ripple),this.ripple.style.color="#03a9f4",this.ripple.style.color="var(--primary-color)",["touchcancel","mouseout","mouseup","touchmove","mousewheel","wheel","scroll"].forEach(function(t){document.addEventListener(t,function(){clearTimeout(e.timer),e.stopAnimation(),e.timer=void 0},{passive:!0})})},t.prototype.bind=function(e){var t=this;if(!e.longPress){e.longPress=!0,e.addEventListener("contextmenu",function(e){var t=e||window.event;return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1,!1});var n=function(n){var a,r;t.cooldownStart||(t.held=!1,n.touches?(a=n.touches[0].pageX,r=n.touches[0].pageY):(a=n.pageX,r=n.pageY),t.timer=window.setTimeout(function(){t.startAnimation(a,r),t.held=!0,e.repeat&&!e.isRepeating&&(e.isRepeating=!0,t.repeatTimeout=setInterval(function(){e.dispatchEvent(new Event("ha-hold"))},e.repeat))},t.holdTime),t.cooldownStart=!0,window.setTimeout(function(){return t.cooldownStart=!1},100))},a=function(n){t.cooldownEnd||["touchend","touchcancel"].includes(n.type)&&void 0===t.timer?e.isRepeating&&t.repeatTimeout&&(clearInterval(t.repeatTimeout),e.isRepeating=!1):(clearTimeout(t.timer),e.isRepeating&&t.repeatTimeout&&clearInterval(t.repeatTimeout),e.isRepeating=!1,t.stopAnimation(),t.timer=void 0,t.held?e.repeat||e.dispatchEvent(new Event("ha-hold")):e.hasDblClick?0===t.nbClicks?(t.nbClicks+=1,t.dblClickTimeout=window.setTimeout(function(){1===t.nbClicks&&(t.nbClicks=0,e.dispatchEvent(new Event("ha-click")))},250)):(t.nbClicks=0,clearTimeout(t.dblClickTimeout),e.dispatchEvent(new Event("ha-dblclick"))):e.dispatchEvent(new Event("ha-click")),t.cooldownEnd=!0,window.setTimeout(function(){return t.cooldownEnd=!1},100))};e.addEventListener("touchstart",n,{passive:!0}),e.addEventListener("touchend",a),e.addEventListener("touchcancel",a),e.addEventListener("mousedown",n,{passive:!0}),e.addEventListener("click",a)}},t.prototype.startAnimation=function(e,t){Object.assign(this.style,{left:e+"px",top:t+"px",display:null}),this.ripple.holdDown=!0,this.ripple.simulatedRipple()},t.prototype.stopAnimation=function(){this.ripple.holdDown=!1,this.style.display="none"},t}(HTMLElement);customElements.get("long-press-custom-card-helpers")||customElements.define("long-press-custom-card-helpers",E);var k=function(e){var t=function(){var e=document.body;if(e.querySelector("long-press-custom-card-helpers"))return e.querySelector("long-press-custom-card-helpers");var t=document.createElement("long-press-custom-card-helpers");return e.appendChild(t),t}();t&&t.bind(e)},T=(e=>(...e)=>{const t=function(){return function(e){k(e.committer.element)}}(...e);return y.set(t,!0),t})();e.durationToSeconds=n,e.formatDate=a,e.formatDateTime=r,e.formatTime=i,e.relativeTime=function(e,t,n){void 0===n&&(n={});var a,r=((n.compareTime||new Date).getTime()-e.getTime())/1e3,i=r>=0?"past":"future";r=Math.abs(r);for(var c=0;c<o.length;c++){if(r<o[c]){r=Math.floor(r),a=t("ui.components.relative_time.duration."+s[c],"count",r);break}r/=o[c]}return void 0===a&&(a=t("ui.components.relative_time.duration.week","count",r=Math.floor(r))),!1===n.includeTense?a:t("ui.components.relative_time."+i,"time",a)},e.secondsToDuration=function(e){var t=Math.floor(e/3600),n=Math.floor(e%3600/60),a=Math.floor(e%3600%60);return t>0?t+":"+c(n)+":"+c(a):n>0?n+":"+c(a):a>0?""+a:null},e.timerTimeRemaining=function(e){var t=n(e.attributes.remaining);if("active"===e.state){var a=(new Date).getTime(),r=new Date(e.last_changed).getTime();t=Math.max(t-(a-r)/1e3,0)}return t},e.applyThemesOnElement=function(e,t,n,a){void 0===a&&(a=!1),e._themes||(e._themes={});var r=t.default_theme;("default"===n||n&&t.themes[n])&&(r=n);var i=Object.assign({},e._themes);if("default"!==r){var o=t.themes[r];Object.keys(o).forEach(function(t){var n="--"+t;e._themes[n]="",i[n]=o[t]})}if(e.updateStyles?e.updateStyles(i):window.ShadyCSS&&window.ShadyCSS.styleSubtree(e,i),a){var s=document.querySelector("meta[name=theme-color]");if(s){s.hasAttribute("default-content")||s.setAttribute("default-content",s.getAttribute("content"));var c=i["--primary-color"]||s.getAttribute("default-content");s.setAttribute("content",c)}}},e.computeDomain=u,e.computeEntity=function(e){return e.substr(e.indexOf(".")+1)},e.computeRTL=l,e.computeRTLDirection=function(e){return l(e)?"rtl":"ltr"},e.computeStateDisplay=function(e,t,n){var o,s=h(t);if("binary_sensor"===s)t.attributes.device_class&&(o=e("state."+s+"."+t.attributes.device_class+"."+t.state)),o||(o=e("state."+s+".default."+t.state));else if(t.attributes.unit_of_measurement&&!["unknown","unavailable"].includes(t.state))o=t.state+" "+t.attributes.unit_of_measurement;else if("input_datetime"===s){var c;if(t.attributes.has_time)if(t.attributes.has_date)c=new Date(t.attributes.year,t.attributes.month-1,t.attributes.day,t.attributes.hour,t.attributes.minute),o=r(c,n);else{var u=new Date;c=new Date(u.getFullYear(),u.getMonth(),u.getDay(),t.attributes.hour,t.attributes.minute),o=i(c,n)}else c=new Date(t.attributes.year,t.attributes.month-1,t.attributes.day),o=a(c,n)}else o="zwave"===s?["initializing","dead"].includes(t.state)?e("state.zwave.query_stage."+t.state,"query_stage",t.attributes.query_stage):e("state.zwave.default."+t.state):e("state."+s+"."+t.state);return o||(o=e("state.default."+t.state)||e("component."+s+".state."+t.state)||t.state),o},e.computeStateDomain=h,e.DEFAULT_DOMAIN_ICON="hass:bookmark",e.DEFAULT_PANEL="lovelace",e.DOMAINS_WITH_CARD=["climate","cover","configurator","input_select","input_number","input_text","lock","media_player","scene","script","timer","vacuum","water_heater","weblink"],e.DOMAINS_WITH_MORE_INFO=["alarm_control_panel","automation","camera","climate","configurator","cover","fan","group","history_graph","input_datetime","light","lock","media_player","script","sun","updater","vacuum","water_heater","weather"],e.DOMAINS_HIDE_MORE_INFO=["input_number","input_select","input_text","scene","weblink"],e.DOMAINS_MORE_INFO_NO_HISTORY=["camera","configurator","history_graph","scene"],e.STATES_OFF=d,e.DOMAINS_TOGGLE=m,e.UNIT_C="°C",e.UNIT_F="°F",e.DEFAULT_VIEW_ENTITY_ID="group.default_view",e.createThing=function(e){var t=function(e,t){return n("hui-error-card",{type:"error",error:e,config:t})},n=function(e,n){var a=window.document.createElement(e);try{a.setConfig(n)}catch(a){return console.error(e,a),t(a.message,n)}return a};if(!e||"object"!=typeof e||!e.type||!e.type.startsWith("custom:"))return t("No type configured",e);var a=e.type.substr("custom:".length);if(customElements.get(a))return n(a,e);var r=t("Custom element doesn't exist: "+e.type+".",e);r.style.display="None";var i=setTimeout(function(){r.style.display=""},2e3);return customElements.whenDefined(e.type).then(function(){clearTimeout(i),p(r,"ll-rebuild",{},r)}),r},e.fixedIcons=f,e.domainIcon=function(e,t){if(e in f)return f[e];switch(e){case"alarm_control_panel":switch(t){case"armed_home":return"hass:bell-plus";case"armed_night":return"hass:bell-sleep";case"disarmed":return"hass:bell-outline";case"triggered":return"hass:bell-ring";default:return"hass:bell"}case"binary_sensor":return t&&"off"===t?"hass:radiobox-blank":"hass:checkbox-marked-circle";case"cover":return"closed"===t?"hass:window-closed":"hass:window-open";case"lock":return t&&"unlocked"===t?"hass:lock-open":"hass:lock";case"media_player":return t&&"off"!==t&&"idle"!==t?"hass:cast-connected":"hass:cast";case"zwave":switch(t){case"dead":return"hass:emoticon-dead";case"sleeping":return"hass:sleep";case"initializing":return"hass:timer-sand";default:return"hass:z-wave"}default:return console.warn("Unable to find icon for domain "+e+" ("+t+")"),"hass:bookmark"}},e.fireEvent=p,e.handleClick=function(e,t,n,a,r){var i;switch(r&&n.dbltap_action?i=n.dbltap_action:a&&n.hold_action?i=n.hold_action:!a&&n.tap_action&&(i=n.tap_action),i||(i={action:"more-info"}),i.action){case"more-info":(n.entity||n.camera_image)&&(p(e,"hass-more-info",{entityId:i.entity?i.entity:n.entity?n.entity:n.camera_image}),i.haptic&&v(e,i.haptic));break;case"navigate":i.navigation_path&&(g(0,i.navigation_path),i.haptic&&v(e,i.haptic));break;case"url":i.url&&window.open(i.url),i.haptic&&v(e,i.haptic);break;case"toggle":n.entity&&(_(t,n.entity),i.haptic&&v(e,i.haptic));break;case"call-service":if(!i.service)return;var o=i.service.split(".",2),s=o[0],c=o[1],u=Object.assign({},i.service_data);"entity"===u.entity_id&&(u.entity_id=n.entity),t.callService(s,c,u),i.haptic&&v(e,i.haptic)}},e.forwardHaptic=v,e.hasConfigOrEntityChanged=function(e,t,n){if(t.has("config")||n)return!0;if(e.config.entity){var a=t.get("hass");return!a||a.states[e.config.entity]!==e.hass.states[e.config.entity]}return!1},e.longPressBind=k,e.longPress=T,e.navigate=g,e.toggleEntity=_,e.turnOnOffEntities=function(e,t,n){void 0===n&&(n=!0);var a={};t.forEach(function(t){if(d.includes(e.states[t].state)===n){var r=u(t),i=["cover","lock"].includes(r)?r:"homeassistant";i in a||(a[i]=[]),a[i].push(t)}}),Object.keys(a).forEach(function(t){var r;switch(t){case"lock":r=n?"unlock":"lock";break;case"cover":r=n?"open_cover":"close_cover";break;default:r=n?"turn_on":"turn_off"}e.callService(t,r,{entity_id:a[t]})})},e.turnOnOffEntity=b,e.getLovelace=function(){var e=document.querySelector("home-assistant");if(e=(e=(e=(e=(e=(e=(e=(e=e&&e.shadowRoot)&&e.querySelector("home-assistant-main"))&&e.shadowRoot)&&e.querySelector("app-drawer-layout partial-panel-resolver"))&&e.shadowRoot||e)&&e.querySelector("ha-panel-lovelace"))&&e.shadowRoot)&&e.querySelector("hui-root")){var t=e.lovelace;return t.current_view=e.___curView,t}return null}});
//# sourceMappingURL=index.umd.js.map
